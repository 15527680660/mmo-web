<script>
  if (window.location.href) {
    console.log("reload anew cache");
  }
</script>

<!DOCTYPE html>

<head></head>

<body></body>
<meta charset="utf-8" />

<noscript>
  <script>
    location.reload();
  </script>
</noscript>

<title>Project SIRI</title>

<noscript> </noscript>
<link rel="icon" href="favicon.ico" type="image/x-icon" />
<link rel="stylesheet" href="styles.css">

<style>
  .fx {
    -webkit-display: flex;
    display: flex;
    margin-left: -20px;
    margin-right: -20px;
  }

  .fx>div {
    padding-left: 20px;
    padding-right: 20px;
  }

  .fx>div:first-child {
    width: 30%;
  }

  .flex {
    -webkit-flex: 1;
    flex: 1;
  }

  #test-target {
    display: block;
    width: 100%;
    margin-bottom: 10px;
  }

  /*
  @import url("./keyboardevent.css");
  */
  /* Using a url */
  body {
    margin: 0;
    width: auto;
    height: auto;
    overflow: auto;
  }

  canvas {
    width: 100%;
    height: 100%;
    background-image: url("https://s3-us-west-2.amazonaws.com/s.cdpn.io/53148/space-texture.jpg");
    background-size: 500px;
  }
</style>
<script>
  //document.que
  //window.addEventListener("KeyboardEvent.code", function(event) {
  //  console.log(event.KeyboardEvent.code);
  //  event.KeyboardEvent.code == 27 ? window.close() : null;
  //  //& console.log('hi') & console.log("space") : null;
  //});

</script>

<script>
  // array();
</script>

<canvas id="c"></canvas>
<!--can only have one canvas-->
<noscript>
  <!--import map is a must for importing as <name>, with es-module-shims.js-->
  <script>
    import * as three from "https://threejs.org/build/three.module.js";
  </script>
</noscript>
<script type="module">
  import * as THREE from "three";
</script>
<script type="importmap">
  {
    "imports": {
      "three": "https://threejs.org/build/three.module.js"
    }
  }
</script>
<!-- Remove this when import maps will be widely supported -->
<script async src="https://unpkg.com/es-module-shims@1.3.6/dist/es-module-shims.js"></script>
<!--defer all modules-->
<script defer type="module" src="./cleaner.js"></script>

<!--non-modules, none-->
<script src="./node_modules/dat.gui/build/dat.gui.min.js"></script>
<script src="./resize.js"></script>
<script src="./node_modules/three/build/three.js"></script>
<!--modules, any import or export function-->
<script defer type="module" src="./game3.js"></script>

<noscript> </noscript>

<!--module import-->
<script>
  //wait for code module to load to work, takes a few tries
  //split coding breaks code or modules breaks code
</script>
<!--game-->

<script>
  ///////////////
  //const      //
  ///////////////
  _winmargin = 15;
  _fps = 30; //motion capture all must be set to this value
  //_mocap = 30;
  //_worldspeed = 30;
</script>
<noscript> </noscript>

<button onclick="myFunction()">Click Me</button>

<script>
  function myFunction() {
    var x = document.getElementById("myDIV");
    if (x.style.display === "none") {
      x.style.display = "block";
    } else {
      x.style.display = "none";
    }
  }

  //    document.body.addEventListener("keydown", function () {
  //            THREEx.FullScreen.request();
  //        }, false);
  //
  //    Document.fullscreenElement
  //    Document.exitFullscreen()
  //    Element.requestFullscreen()
  //
  //    THREEx.FullScreen.request = function (element) {
  //            element = element || document.body;
  //            if (this._hasWebkitFullScreen) {
  //                element.webkitRequestFullScreen();
  //                console.log("f");
  //            } else if (this._hasMozFullScreen) {
  //                element.mozRequestFullScreen();
  //                console.log("g");
  //            } else {
  //                console.assert(false);
  //            }
  //        }
</script>

<div id="myDIV">mmo-web</div>
<!---->
<style>
  .info {
    color: rgb(255, 0, 242);
    position: absolute;
    top: 75px;
    bottom: 0px;
    left: 10px;
    right: 0px;
    width: 0px;
    height: 0px;
  }
</style>
<div class="info">INFO &&&</div>
<!---->
okay information
<script>
  //const info = document.getElementById('info');
  //info.appendChild(stats.dom);
  //info.appendChild(renderer.domElement);
</script>

<script></script>

<script>
  //    /* Get the element you want displayed in fullscreen mode (a video in this example): */
  //    var elem = document.getElementById("myvideo");
  //
  //    /* When the openFullscreen() function is executed, open the video in fullscreen.
  //    Note that we must include prefixes for different browsers, as they don't support the requestFullscreen method yet */
  //    function openFullscreen() {
  //        if (elem.requestFullscreen) {
  //            elem.requestFullscreen();
  //        } else if (elem.webkitRequestFullscreen) { /* Safari */
  //            elem.webkitRequestFullscreen();
  //        } else if (elem.msRequestFullscreen) { /* IE11 */
  //            elem.msRequestFullscreen();
  //        }
  //    }
</script>

<script>
  //blue two line

  //import * as THREE from "three";

  const renderer = new THREE.WebGLRenderer();
  renderer.setSize(window.innerWidth - _winmargin, window.innerHeight);
  document.body.appendChild(renderer.domElement);
  const camera = new THREE.PerspectiveCamera(
    45,
    (window.innerWidth - _winmargin) / window.innerHeight,
    1,
    500
  );
  camera.position.set(0, 0, 100);
  camera.lookAt(0, 0, 0);
  const scene = new THREE.Scene();
  //create a blue LineBasicMaterial
  const material = new THREE.LineBasicMaterial({ color: 0x0000ff });
  const points = [];
  points.push(new THREE.Vector3(-10, 0, 0));
  points.push(new THREE.Vector3(0, 10, 0));
  points.push(new THREE.Vector3(10, 0, 0));
  const geometry = new THREE.BufferGeometry().setFromPoints(points);
  const line = new THREE.Line(geometry, material);
  scene.add(line);

  //request animation frame (_RAF) or setInterval //
  //    setInterval(() => {
  //    renderer.render(scene, camera);
  //    }, 1000/_fps); // use declared const _fps 24/30 fps
  //        requestAnimationFrame(render);
  //

  //function update() {
  var render = function () {
    requestAnimationFrame(render);
    //    //delta += clock.getDelta();
    //    renderer.setSize(window.innerWidth - _winmargin, window.innerHeight);
    //    cube.rotation.x += .06;
    //    cube.rotation.y += .06;
    //    camera.updateProjectionMatrix();
    //    //if (delta > interval) {
    //    //  // The draw or time dependent code are here
    //    //  renderer.render(scene, camera);
    //    //  delta = delta % interval;
    //    //}
    renderer.render(scene, camera);
  };
  render();
  //}
  //update();

  ////
  async function redirect(a) {
    let result;
    if (a > 0) {
      result = "positive";
      window.location = await "game2.html";
    } else {
      result = "NOT positive";
    }
    return result;
  }
  redirect(0);
</script>

<style>
  /* Safari syntax */
  :-webkit-full-screen {
    background-color: yellow;
  }

  /* IE11 */
  :-ms-fullscreen {
    background-color: yellow;
  }

  /* Standard syntax */
  :fullscreen {
    background-color: yellow;
  }

  /* Style the button */
  button {
    padding: 0px;
    font-size: 10px;
  }
</style>

<h2>Fullscreen with JavaScript</h2>
<p>
  Click on the "Open Fullscreen" button to open this page in fullscreen mode.
  <br />
  Close it by either clicking the "Esc" key on your keyboard, or with the "Close
  Fullscreen" button.
</p>

<button onclick="openFullscreen();">Open Fullscreen</button>
<button onclick="closeFullscreen();">Close Fullscreen</button>

<!--checkbox-->
<p>Please click on the checkbox control.</p>

<form>
  <label for="id-checkbox">Checkbox:</label>
  <input type="checkbox" id="id-checkbox" />
</form>

<div id="output-box"></div>

<script>
  document.querySelector("#id-checkbox").addEventListener(
    "click",
    function (event) {
      document.getElementById("output-box").innerHTML +=
        "Sorry! <code>preventDefault()</code> won't let you check this!<br>";
      event.preventDefault();
    },
    false
  );
  // end of checkbox //

  var elem = document.documentElement;

  //elem.addEventListener("keydown", function (e) {
  //  var charCode = e.charCode || e.keyCode || e.which;
  //  if (charCode == 27) {
  //    console.log("Escape is not suppressed for lightbox!");
  //    return e.preventDefault;
  //  }
  //});


  function openFullscreen() {

    if (elem.requestFullscreen) {
      elem.requestFullscreen();
    } else if (elem.webkitRequestFullscreen) {
      /* Safari */
      elem.webkitRequestFullscreen();
      elem.webkitEnterFullscreen(); // add
      document.webkitEnterFullscreen(); // add
    } else if (elem.msRequestFullscreen) {
      /* IE11 */
      elem.msRequestFullscreen();
    }
  }

  function closeFullscreen() {

    if (document.exitFullscreen) {
      document.exitFullscreen();
    } else if (document.webkitExitFullscreen) {
      /* Safari */
      document.webkitExitFullscreen();
      elem.webkitExitFullscreen(); //add
      document.webkitExitFullscreen(); //add
    } else if (document.msExitFullscreen) {
      /* IE11 */
      document.msExitFullscreen();
    }
  }

  document
  //elem.fullscreenchange
    //  .querySelector("div.lightbox")
  //  elem.addEventListener("keydown", function (e) {
  //    var charCode = e.charCode || e.keyCode || e.which;
  //    if (charCode == 27) {
  //      //this.asd = asd
  //      console.log("Escape is not suppressed for lightbox!");
  //      console.log(this.asd);
  //      return event.preventDefault;
  //
  //    }
  //  });
</script>

<script>
  function supports_html5_storage() {
    try {
      console.log("localStorage is supported");
      return "localStorage" in window && window["localStorage"] !== null;
    } catch (e) {
      console.log("localStorage is not supported");
      return false;
    }
  }
  supports_html5_storage();
</script>


<!--keyboard input-->
<script>
  //elem.addEventListener('keyChar', (event) => {
  //  console.log('keyChar')

  window.addEventListener('keydown', (event) => {
    switch (event.key) {
      case 'w':
        console.log('up')
        break;
      case 's':
        console.log('down')
        break;
      case 'a':
        console.log('left')
        break;
      case 'd':
        console.log('right')
        break;
      case ' ':
        console.log('space')
        break;
      /*
      console logging detection, can note out. still detecting
      when hit ' ' space, will set attack to true and do damage
      set player.isAttacking = false

      in detection after hit once
      then goes into timeout
      position = this.position //canceled
      position: {
          x: this.position.x,
          y: this.position.y
      }    //now an object, with a property 
      now put into update(), to draw boxes correctly
      attack.offset.x
      need to create offset property inside attack object
      //object
      this.attackBox {
      }
      inside a constructor
      of sprite class
      offset is equal to offset: offset
      now declare
      inside another object, offset can be set:

      offset: {
        x: 10,
        y: 5
      }
      
      so now the offset property is into the enemy class, meddling with the offset property of the previously declared inside a constructor of the: const enemy = new Sprite ({
      }) 

      */

      //alt + z is word wrap on or off

      //case 'd':
      //    console.log('up')
      //    break;
      //case 'd':
      //    console.log('up')
      //    break;
      //case 'd':
      //    console.log('up')
      //    break;

    }
    //console.log(event.key)
    //console.log(event)

    //console.log(event)
    //if (event.key == 'ArrowLeft') {
    //    document.getElementById('left').click();
    //}
    //if (event.key == 'a') {
    //    console.log('this character will move left now');
    //}        
    //yay keyboard input works for anything now.
  })
</script>

<div class="fx">
  <div>
    <textarea rows="5" name="test-target" id="test-target"></textarea>
    <button type="button" name="btn-reset" id="btn-reset">Reset</button>
  </div>
  <div class="flex">
    <pre id="console-log"></pre>
  </div>
</div>
<script type='module' src="./keyboardevent.js"></script>